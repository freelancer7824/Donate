<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>রক্তদান - User Dashboard</title>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<!-- Firebase (compat as in your original) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
  /* ========= Base ========= */
  :root{
    --primary:#1976d2;
    --primary-dark:#115293;
    --danger:#b71c1c;
    --muted:#6b7280;
    --card-bg:#ffffff;
    --bg:#f4f7fb;
    --radius:10px;
    --glass: rgba(255,255,255,0.7);
  }
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Noto Sans Bengali',sans-serif}
  body{background:linear-gradient(180deg,#f7fbff 0%, #f4f7fb 100%);color:#111;min-height:100vh;}

  /* ========= Navbar ========= */
  .navbar{
    position:fixed;top:0;left:0;right:0;height:60px;background:var(--primary);
    display:flex;align-items:center;gap:8px;padding:6px 14px;z-index:1200;
    box-shadow:0 6px 18px rgba(25,118,210,0.12);
  }
  .navbar .logo{display:flex;align-items:center;gap:10px;color:#fff;font-weight:700;font-size:18px}
  .navbar .logo i{transform:translateY(2px)}
  .navbar .nav-actions{margin-left:auto;display:flex;gap:8px;align-items:center}
  .navbar button.nav-btn{
    background:transparent;border:none;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;font-size:14px;
  }
  .navbar button.nav-btn:hover{background:rgba(255,255,255,0.08)}
  .pending-badge{background:#fff;color:var(--primary);padding:4px 8px;border-radius:20px;font-weight:700;font-size:13px;margin-left:6px}

  /* ========= Layout ========= */
  .container{max-width:1100px;margin:80px auto;padding:16px;}
  .grid{
    display:grid;grid-template-columns:1fr 340px;gap:18px;
  }
  /* Mobile single column */
  @media(max-width:980px){ .grid{grid-template-columns:1fr} .right-col{order:2} .left-col{order:1} }

  /* ========= Cards ========= */
  .card{
    background:var(--card-bg);border-radius:var(--radius);padding:16px;box-shadow:0 6px 18px rgba(12,24,60,0.06);
    overflow:hidden;
  }

  /* ========= Hero ========= */
  .hero{
    display:flex;gap:16px;align-items:center;justify-content:space-between;
    flex-wrap:wrap;padding:18px;border-radius:12px;background:
    linear-gradient(135deg, rgba(25,118,210,0.06), rgba(25,118,210,0.02));
  }
  .hero-left h1{font-size:20px;margin-bottom:6px}
  .hero-left p{color:var(--muted);font-size:14px}
  .hero-cta{display:flex;gap:8px;align-items:center}
  .cta-btn{
    background:var(--primary);color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;
    box-shadow:0 8px 20px rgba(25,118,210,0.12);display:inline-flex;gap:8px;align-items:center;
    transition:transform .18s ease, box-shadow .18s ease;
  }
  .cta-btn:hover{transform:translateY(-3px);box-shadow:0 14px 30px rgba(17,82,147,0.16)}
  .secondary-btn{background:transparent;color:var(--primary);border:1px solid rgba(25,118,210,0.12);padding:8px 12px;border-radius:8px}

  /* ========= Features ========= */
  .features{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px}
  @media(max-width:900px){ .features{grid-template-columns:repeat(2,1fr)} }
  @media(max-width:520px){ .features{grid-template-columns:1fr} }
  .feature{
    background:linear-gradient(180deg, #fff, rgba(255,255,255,0.95));padding:12px;border-radius:12px;
    display:flex;gap:12px;align-items:flex-start;transition:transform .22s ease, box-shadow .22s ease;
  }
  .feature:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(12,24,60,0.08)}
  .feature i{font-size:22px;color:var(--primary);min-width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center}
  .feature h4{font-size:14px;margin-bottom:4px}
  .feature p{font-size:13px;color:var(--muted)}

  /* ========= Right column (profile + stats) ========= */
  .profile{display:flex;gap:12px;align-items:center}
  .avatar{
    width:68px;height:68px;border-radius:12px;background:linear-gradient(135deg, #e3f2fd,#fff);display:flex;align-items:center;justify-content:center;
    font-weight:700;font-size:20px;color:var(--primary)
  }
  .stat{
    display:flex;flex-direction:column;gap:4px;margin-top:12px;
  }
  .stat .val{font-size:18px;font-weight:700}
  .stat .label{font-size:13px;color:var(--muted)}

  /* ========= Request section ========= */
  .request-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  button.actionBtn{padding:10px 14px;background:var(--primary);color:#fff;border:none;border-radius:10px;cursor:pointer;font-size:15px}
  button.actionBtn[disabled]{opacity:0.5;cursor:not-allowed;transform:none}
  .status-pill{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px}
  .status-pending{background:#fff2cc;color:#8a5d00;border:1px solid #ffe5a3}
  .status-confirmed{background:#e6ffef;color:#046a3b;border:1px solid #bff7d0}
  .status-rejected{background:#ffecec;color:#7a1515;border:1px solid #f4b6b6}

  /* Animated pulse for pending */
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.18); }
    70% { box-shadow: 0 0 0 10px rgba(255, 193, 7, 0); }
    100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0); }
  }
  .pulse { animation: pulse 2s infinite; border-radius:999px; }

  /* Request history list */
  .history-item{display:flex;justify-content:space-between;gap:12px;padding:10px;border-radius:8px;border:1px dashed rgba(17,24,39,0.04);margin-top:8px}
  .history-item small{color:var(--muted)}

  /* small text */
  .muted{color:var(--muted);font-size:13px}

  /* Footer small */
  .page-footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
.hide{
  display:none;
}
#needDonate{
  background: green;
  margin-top:10px;
}
</style>
</head>
<body>

<!-- ===== NAVBAR ===== -->
<div class="navbar">
  <div class="logo"><i class="fa-solid fa-droplet"></i> রক্তদান</div>
  <div style="margin-left:12px;color:rgba(255,255,255,0.9);font-size:13px">স্বাস্থ্য, সহমর্মিতা ও জীবন</div>

  <div class="nav-actions">
    <button class="nav-btn" id="homeBtn"><i class="fa-solid fa-house"></i> হোম</button>
    <button class="nav-btn" id="requestBtnNav"><i class="fa-solid fa-hand-holding-droplet"></i> রক্তদান</button>
    <button class="nav-btn" id="historyBtn"><i class="fa-solid fa-clock-rotate-left"></i> ইতিহাস</button>

    <button class="nav-btn" onclick="logout()"><i class="fa-solid fa-sign-out-alt"></i> লগআউট</button>
  </div>
</div>

<!-- ===== MAIN CONTAINER ===== -->
<div class="container">
  <div class="grid">

    <!-- LEFT / MAIN COLUMN -->
    <div class="left-col">

      <!-- HOME (default) -->
      <div id="homeSection" class="card" style="margin-bottom:14px;">
        <div class="hero">
          <div class="hero-left">
            <h1 id="welcomeTitle">স্বাগতম</h1>
            <p id="welcomeSub">রক্তদানে অংশগ্রহণ করে আপনি কারো জীবন রক্ষা করতে পারেন। নিচে আপনার প্রোফাইল সংক্ষিপ্ত ও রক্তদানের নির্দেশিকা আছে।</p>
            <div style="margin-top:10px;">
              <button class="cta-btn" id="goRequestFromHero"><i class="fa-solid fa-hand-holding-droplet"></i> রক্তদান করুন</button>
              <a href="need_donate.html">
              <button class="cta-btn" id="needDonate"><i class="fa-solid fa-hand-holding-droplet"></i> রক্তগ্রহণ করুন</button></a>
            </div>
          </div>
          <div class="hero-right" style="min-width:220px;text-align:right">
            <div style="font-size:12px;color:var(--muted)">আপনার দ্রুত পরিসংখ্যান</div>
            <div style="display:flex;gap:12px;justify-content:flex-end;margin-top:8px">
              <div style="text-align:center">
                <div class="val" id="stat-donations">0</div>
                <div class="muted" style="font-size:13px">ডোনেশন</div>
              </div>
              <div style="text-align:center">
                <div class="val" id="stat-last-days">--</div>
                <div class="muted" style="font-size:13px">শেষ রক্তদান (দিন)</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Features -->
        <div class="features" style="margin-top:14px;">
          <div class="feature">
            <i class="fa-solid fa-heart-pulse"></i>
            <div>
              <h4>নিরাপদ রক্তদান</h4>
              <p>প্রক্রিয়া নিরাপদ ও স্যানিটাইজড। রক্তদানের আগে প্রাথমিক স্বাস্থ্য পরীক্ষা করা হয়।</p>
            </div>
          </div>
          <div class="feature">
            <i class="fa-solid fa-people-group"></i>
            <div>
              <h4>কমিউনিটি সাপোর্ট</h4>
              <p>আপনি দান করলে স্থানীয় হাসপাতাল বা রোগীকে সহায়তা করা হয়।</p>
            </div>
          </div>
          <div class="feature">
            <i class="fa-solid fa-truck-medical"></i>
            <div>
              <h4>জরুরি সেবা</h4>
              <p>জরুরি ক্ষেত্রে দাতাদের তালিকা দ্রুত শেয়ার করা হয়।</p>
            </div>
          </div>
        </div>

        <!-- Donation tips -->
        <div style="margin-top:14px; display:flex; gap:12px; flex-direction:column;">
          <div style="display:flex;gap:10px;align-items:flex-start;">
            <div style="font-size:20px;color:var(--primary);margin-top:2px"><i class="fa-solid fa-lightbulb"></i></div>
            <div>
              <h4 style="margin-bottom:6px">রক্তদানের সহজ টিপস</h4>
              <p class="muted">রক্ত দানের আগে পর্যাপ্ত জল খাওয়া, হালকা খাবার গ্রহণ করা, এবং পর্যাপ্ত বিশ্রাম নেওয়া উচিত। নির্দিষ্ট স্বাস্থ্য শর্ত থাকলে ডাক্তারের সাথে পরামর্শ করুন।</p>
            </div>
          </div>
        </div>
      </div>

      <!-- REQUEST PAGE -->
      <div id="requestSection" class="card" style="display:none;">
        <h3>রক্তদানের রিকোয়েস্ট</h3>
        <p class="muted" id="requestIntro">আপনি চাইলে এখানে রিকোয়েস্ট পাঠাতে পারবেন — তবে যদি আপনার পূর্বের রিকোয়েস্ট <b>pending</b> থাকে, তখন নতুন রিকোয়েস্ট পাঠাতে পারবেন না।</p>

        <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:12px">
          <div style="flex:1">
            <div class="muted">আপনার রক্ত গ্রুপ</div>
            <div style="font-weight:700;font-size:16px" id="userBlood">--</div>
          </div>

          <div style="flex:1">
            <div class="muted">জেলা / উপজেলা</div>
            <div id="userLocation" style="font-weight:700;font-size:16px">--</div>
          </div>

          <div style="flex:1">
            <div class="muted">শেষ রক্তদান</div>
            <div id="userLastDonate" style="font-weight:700;font-size:16px">--</div>
          </div>
        </div>

        <div class="request-actions" style="margin-top:12px">
          <button id="sendRequestBtn" class="actionBtn"><i class="fa-solid fa-paper-plane"></i> রিকোয়েস্ট পাঠান</button>
          <div id="statusPillWrap" style="align-self:center"></div>
        </div>

        <div style="margin-top:14px">
          <h4 style="margin-bottom:8px">আপনার রিকোয়েস্ট ইতিহাস (সর্বশেষ 5)</h4>
          <div id="requestHistory"></div>
        </div>

        <div class="page-footer">নোট: রিকোয়েস্ট পাঠানোর পরে অ্যাডমিন সেটিং অনুসারে আপনাকে Confirmed/Rejected করা হবে।</div>
      </div>

      <!-- HISTORY -->
      <div id="historySection" class="card" style="display:none;margin-top:12px;">
        <h3>আপনার রিকোয়েস্ট ইতিহাস</h3>
        <div id="fullHistory" style="margin-top:10px"></div>
      </div>

    </div>

    <!-- RIGHT COLUMN -->
    <div class="right-col">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div class="profile">
            <div class="avatar" id="avatarInitials">A</div>
            <div>
              <div id="userFullname" style="font-weight:700">--</div>
              <div class="muted" id="userPhone">--</div>
            </div>
          </div>
          <div style="text-align:right">
            <div class="muted">স্ট্যাটাস</div>
            <div id="quickStatus" style="margin-top:6px"><span class="status-pill status-pending pulse" id="quickStatusPill">Loading</span></div>
          </div>
        </div>

        <div class="stat" style="margin-top:12px">
          <div class="val" id="statTotalRequests">0</div>
          <div class="label muted">মোট রিকোয়েস্ট</div>
        </div>

        
        <div style="margin-top:12px">
          <h4 style="margin-bottom:8px">দ্রুত অ্যাকশন</h4>
          <div style="display:flex;gap:8px">
            <button class="actionBtn" id="quickRequestBtn"><i class="fa-solid fa-hand-holding-droplet"></i> রিকোয়েস্ট</button>
            <button class="secondary-btn" id="quickHistoryBtn">ইতিহাস দেখুন</button>
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <h4>দ্রুত তথ্য</h4>
        <p class="muted" style="margin-top:8px">রক্ত দানের জন্য সঠিক শর্ত: প্রাপ্তবয়স্ক, সুস্থ শরীর এবং হাসপাতালের প্রয়োজনীয় নির্দেশাবলী মেনে চলা।</p>
      </div>

    </div>

  </div>
</div>

<script>
  // ===== Firebase Config (your config preserved) =====
  const firebaseConfig = {
    apiKey: "AIzaSyAqhLfmOfmP-_8DOcoEH7Ck7fMF9Id4vJ4",
    authDomain: "earn-project-5f892.firebaseapp.com",
    databaseURL: "https://earn-project-5f892-default-rtdb.firebaseio.com/",
    projectId: "earn-project-5f892",
    storageBucket: "earn-project-5f892.firebasestorage.app",
    messagingSenderId: "8457886057",
    appId: "1:8457886057:web:b5e01d0972d169f47085f8"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // ===== Current User =====
  const donorData = JSON.parse(localStorage.getItem('donorData'));
  if(!donorData){
    alert("Login করুন!");
    window.location.href = "login.html";
  }
  const userId = donorData.phone;

  // DOM references
  const homeBtn = document.getElementById('homeBtn');
  const requestBtnNav = document.getElementById('requestBtnNav');
  const historyBtn = document.getElementById('historyBtn');

  const homeSection = document.getElementById('homeSection');
  const requestSection = document.getElementById('requestSection');
  const historySection = document.getElementById('historySection');
  const goRequestFromHero = document.getElementById('goRequestFromHero');

  const sendRequestBtn = document.getElementById('sendRequestBtn');
  const statusPillWrap = document.getElementById('statusPillWrap');
  const requestHistory = document.getElementById('requestHistory');
  const fullHistory = document.getElementById('fullHistory');

  const userFullnameEl = document.getElementById('userFullname');
  const userPhoneEl = document.getElementById('userPhone');
  const avatarInitials = document.getElementById('avatarInitials');
  const userBlood = document.getElementById('userBlood');
  const userLocation = document.getElementById('userLocation');
  const userLastDonate = document.getElementById('userLastDonate');
  const statDonations = document.getElementById('stat-donations');
  const statLastDays = document.getElementById('stat-last-days');
  const statTotalRequests = document.getElementById('statTotalRequests');
  const quickStatusPill = document.getElementById('quickStatusPill');

  // quick action buttons
  document.getElementById('quickRequestBtn').addEventListener('click', ()=> { showSection('request'); });
  document.getElementById('quickHistoryBtn').addEventListener('click', ()=> { showSection('history'); });

  // logout
  function logout(){
    localStorage.removeItem('donorData');
    alert("লগআউট সম্পন্ন!");
    window.location.href = "login.html";
  }

  // initial profile fill
  function populateProfile(){
    userFullnameEl.innerText = donorData.fullname || "--";
    userPhoneEl.innerText = donorData.phone || "--";
    avatarInitials.innerText = (donorData.fullname || "U").split(" ").map(s=>s[0]).slice(0,2).join("").toUpperCase();
    userBlood.innerText = donorData.bloodGroup || "--";
    userLocation.innerText = (donorData.district || "--") + " / " + (donorData.upazila || "--");
    document.getElementById('welcomeTitle').innerText = `স্বাগতম ${donorData.fullname || ''}`;
  }

  // Utility: format date
  function formatDate(iso){
    try { return new Date(iso).toLocaleString(); } catch(e){ return iso; }
  }

  // ===== Request button logic - disable if any pending request for this user =====
  let currentPendingRequestKey = null;
  function checkUserRequestsLive(){
    // Listen for requests by this user to update status live
    const qRef = db.ref('requests').orderByChild('userId').equalTo(userId);
    qRef.on('value', snapshot=>{
      let latest = null;
      let total = 0;
      snapshot.forEach(snap=>{
        total++;
        const r = snap.val(); r._key = snap.key;
        // choose latest by requestDate
        if(!latest || new Date(r.requestDate) > new Date(latest.requestDate)) latest = r;
      });

      statTotalRequests.innerText = total;
      statDonations.innerText = donorData.totalDonations || 0;

      // show latest status pill and history preview
      requestHistory.innerHTML = "";
      const items = [];
      snapshot.forEach(snap=>{
        const r = snap.val(); r._key = snap.key;
        items.push(r);
      });
      // sort desc by date
      items.sort((a,b)=> new Date(b.requestDate) - new Date(a.requestDate));
      items.slice(0,5).forEach(it=>{
        const div = document.createElement('div');
        div.className = 'history-item';
        const left = document.createElement('div');
        left.innerHTML = `<div style="font-weight:700">${it.bloodGroup} — ${it.district}/${it.upazila}</div><small>${formatDate(it.requestDate)}</small>`;
        const right = document.createElement('div');
        const st = document.createElement('span');
        st.className = 'status-pill ' + (it.status==='pending' ? 'status-pending pulse' : it.status==='confirmed' ? 'status-confirmed' : 'status-rejected');
        st.innerText = it.status.toUpperCase();
        right.appendChild(st);
        div.appendChild(left);
        div.appendChild(right);
        requestHistory.appendChild(div);
      });

      // full history
      fullHistory.innerHTML = "";
      items.forEach(it=>{
        const d = document.createElement('div');
        d.className = 'history-item';
        d.innerHTML = `<div><b>${it.bloodGroup}</b> — ${it.district}/${it.upazila}<br><small>${formatDate(it.requestDate)}</small></div>
                       <div><span class="status-pill ${it.status==='pending'?'status-pending pulse':it.status==='confirmed'?'status-confirmed':'status-rejected'}">${it.status}</span><br><small style="display:block;margin-top:6px">${it.confirmedDate?formatDate(it.confirmedDate):''}</small></div>`;
        fullHistory.appendChild(d);
      });

      // decide sendRequestBtn state based on any pending
      const anyPending = items.some(i=>i.status === 'pending');
      if(anyPending){
        // show latest pending data
        const latestPending = items.find(i=>i.status==='pending');
        currentPendingRequestKey = latestPending ? latestPending._key : null;
        sendRequestBtn.disabled = true;
        sendRequestBtn.innerText = "আপনার রিকোয়েস্ট প্রক্রিয়াধীন (Pending)";
        // show status pill
        statusPillWrap.innerHTML = `<span class="status-pill status-pending pulse">Pending</span>`;
        quickStatusPill.className = 'status-pill status-pending pulse';
        quickStatusPill.innerText = 'Pending';
      } else {
        currentPendingRequestKey = null;
        sendRequestBtn.disabled = false;
        sendRequestBtn.innerHTML = '<i class="fa-solid fa-paper-plane"></i> রিকোয়েস্ট পাঠান';
        statusPillWrap.innerHTML = `<span class="status-pill status-confirmed">No pending</span>`;
        quickStatusPill.className = 'status-pill status-confirmed';
        quickStatusPill.innerText = 'Ready';
      }

      // show latest request's overall status in right column (if any)
      if(items.length>0){
        const latest = items[0];
        if(latest.status === 'pending'){
          quickStatusPill.className = 'status-pill status-pending pulse';
          quickStatusPill.innerText = 'Pending';
        } else if(latest.status === 'confirmed'){
          quickStatusPill.className = 'status-pill status-confirmed';
          quickStatusPill.innerText = 'Confirmed';
        } else {
          quickStatusPill.className = 'status-pill status-rejected';
          quickStatusPill.innerText = 'Rejected';
        }
      }

    });
  }

  // Send request (only if not pending)
  sendRequestBtn.addEventListener('click', ()=>{
    // double check there's no pending
    db.ref('requests').orderByChild('userId').equalTo(userId).once('value').then(snapshot=>{
      let anyPending = false;
      snapshot.forEach(snap=>{
        if(snap.val().status === 'pending') anyPending = true;
      });
      if(anyPending){
        alert('আপনার আগে থেকেই একটি pending রিকোয়েস্ট আছে। দয়া করে আগে সেটির status দেখুন।');
        return;
      }

      // push new request
      const reqRef = db.ref('requests').push();
      reqRef.set({
        userId,
        fullname: donorData.fullname,
        phone: donorData.phone,
        bloodGroup: donorData.bloodGroup || 'Unknown',
        district: donorData.district || '',
        upazila: donorData.upazila || '',
        status: "pending",
        requestDate: new Date().toISOString(),
        confirmedDate: null
      }).then(()=>{
        alert("আপনার রিকোয়েস্ট সফলভাবে পাঠানো হয়েছে!");
      }).catch(err=>{
        console.error(err);
        alert("রিকোয়েস্ট পাঠাতে সমস্যা হয়েছে। আবার চেষ্টা করুন।");
      });
    });
  });

  // ===== Home / Section navigation =====
  function showSection(name){
    homeSection.style.display = (name === 'home') ? 'block' : 'none';
    requestSection.style.display = (name === 'request') ? 'block' : 'none';
    historySection.style.display = (name === 'history') ? 'block' : 'none';
    // scroll to top of container for better UX
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
  homeBtn.addEventListener('click', ()=> showSection('home'));
  requestBtnNav.addEventListener('click', ()=> showSection('request'));
  historyBtn.addEventListener('click', ()=> showSection('history'));
  goRequestFromHero.addEventListener('click', ()=> showSection('request'));

  // ===== initializations =====
  populateProfile();
  checkUserRequestsLive();

  // fill last donate info in profile area
  db.ref('donors/' + userId + '/lastDonateDate').once('value').then(snap=>{
    const last = snap.val();
    if(last){
      const diff = Math.floor((new Date() - new Date(last)) / (1000*60*60*24));
      userLastDonate.innerText = diff + " দিন আগে";
      statLastDays.innerText = diff;
    } else {
      userLastDonate.innerText = "কোনো রক্ত দেওয়া হয়নি";
      statLastDays.innerText = "--";
    }
  });

  // track total donations if stored
  db.ref('donors/' + userId + '/totalDonations').once('value').then(snap=>{
    const val = snap.val() || 0;
    document.getElementById('stat-donations').innerText = val;
  });

  // Auto-open home
  showSection('home');

  // Ensure quick nav buttons reflect actions
  document.getElementById('homeBtn').addEventListener('click', ()=> showSection('home'));
  document.getElementById('requestBtnNav').addEventListener('click', ()=> showSection('request'));
  document.getElementById('historyBtn').addEventListener('click', ()=> showSection('history'));

</script>
</body>
</html>